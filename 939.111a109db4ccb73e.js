"use strict";(self.webpackChunktunes=self.webpackChunktunes||[]).push([[939],{939:($,p,r)=>{r.r(p),r.d(p,{HomePageModule:()=>z});var s=r(6019),f=r(3009);function m(e,o,t,i,a,c,l){try{var d=e[c](l),u=d.value}catch(Q){return void t(Q)}d.done?o(u):Promise.resolve(u).then(i,a)}function x(e){return function(){var o=this,t=arguments;return new Promise(function(i,a){var c=e.apply(o,t);function l(u){m(c,i,a,l,d,"next",u)}function d(u){m(c,i,a,l,d,"throw",u)}l(void 0)})}}var g=r(4499),v=r(7908),n=r(1514),h=r(2730),_=r(7803);function C(e,o){1&e&&(n.TgZ(0,"div",2),n.TgZ(1,"div",3),n.TgZ(2,"span",4),n._uU(3,"Loading...."),n.qZA(),n.qZA(),n.qZA())}function T(e,o){if(1&e&&(n.TgZ(0,"div"),n._UZ(1,"span",5),n.qZA()),2&e){const t=n.oxw();n.xp6(1),n.Q6J("innerHTML",t.error,n.oJD)}}let Z=(()=>{class e{constructor(){this.isLoading=!1,this.error=null}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-loading-state"]],inputs:{isLoading:"isLoading",error:"error"},decls:3,vars:2,consts:[["style","text-align: center; opacity: 0.15;",4,"ngIf"],[4,"ngIf"],[2,"text-align","center","opacity","0.15"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],[3,"innerHTML"]],template:function(t,i){1&t&&(n.TgZ(0,"div"),n.YNc(1,C,4,0,"div",0),n.YNc(2,T,2,1,"div",1),n.qZA()),2&t&&(n.xp6(1),n.Q6J("ngIf",i.isLoading),n.xp6(1),n.Q6J("ngIf",!i.isLoading&&i.error))},directives:[s.O5],styles:[""]}),e})();var y=r(5051),b=r(4262);function w(e,o){if(1&e&&n._UZ(0,"img",14),2&e){const t=n.oxw(2);n.Q6J("src",t.tune.imageUrl,n.LSH)}}function k(e,o){1&e&&n._UZ(0,"span",15)}function M(e,o){if(1&e){const t=n.EpF();n.TgZ(0,"div",16),n.TgZ(1,"a",17),n.NdJ("click",function(a){return n.CHM(t),n.oxw(2).linkClick(a)}),n._UZ(2,"i",18),n.qZA(),n.qZA()}if(2&e){const t=n.oxw(2);n.xp6(1),n.Q6J("href",t.tune.link,n.LSH)}}const L=function(e){return{favorite:e}};function P(e,o){if(1&e){const t=n.EpF();n.TgZ(0,"div",1),n.NdJ("click",function(){return n.CHM(t),n.oxw().cardClick()}),n.ALo(1,"async"),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.YNc(4,w,1,1,"img",4),n.qZA(),n.TgZ(5,"div",5),n.TgZ(6,"div",6),n._UZ(7,"span",7),n.TgZ(8,"i",8),n.NdJ("click",function(a){return n.CHM(t),n.oxw().favoritClick(a)}),n.qZA(),n.YNc(9,k,1,0,"span",9),n.ALo(10,"async"),n.qZA(),n.TgZ(11,"div",10),n._UZ(12,"span",11),n.qZA(),n.qZA(),n.qZA(),n.TgZ(13,"div",12),n._UZ(14,"span",11),n.qZA(),n.YNc(15,M,3,1,"div",13),n.qZA()}if(2&e){const t=n.oxw();n.Q6J("ngClass",n.VKq(11,L,n.lcZ(1,7,t.isFavorite$))),n.xp6(4),n.Q6J("ngIf",t.tune.imageUrl),n.xp6(3),n.Q6J("innerHtml",t.tune.category,n.oJD),n.xp6(2),n.Q6J("ngIf",n.lcZ(10,9,t.isFavorite$)),n.xp6(3),n.Q6J("innerHtml",t.tune.artist,n.oJD),n.xp6(2),n.Q6J("innerHtml",t.tune.title,n.oJD),n.xp6(1),n.Q6J("ngIf",t.tune.link)}}let O=(()=>{class e{constructor(t,i){this.eventBus=t,this.favoritesService=i,this.isFavorite$=new g.X(!1)}set tune(t){if(this._tune=t,t){const i=this.favoritesService.isFavorite(null==t?void 0:t.id);this.isFavorite$.next(i)}}get tune(){return this._tune}ngOnInit(){}cardClick(){!this._tune||this.eventBus.showTuneInfo(this._tune)}favoritClick(t){if(t.stopPropagation(),!this._tune)return;const i=this.favoritesService.toggle(this._tune.id);this.isFavorite$.next(i)}linkClick(t){t.stopPropagation()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(y.Y),n.Y36(b.G))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-tune-card"]],inputs:{tune:"tune"},decls:1,vars:1,consts:[["class","tune-item d-flex flex-column",3,"ngClass","click",4,"ngIf"],[1,"tune-item","d-flex","flex-column",3,"ngClass","click"],[1,"d-flex"],[1,"tune-img-container"],["class","tune-img",3,"src",4,"ngIf"],[1,"pl-2","flex-grow-1"],[1,"category-conteiner","d-flex"],[1,"ml-auto","z-top",3,"innerHtml"],[1,"tune-icon","tune-icon-bookmark","ml-3","z-top",3,"click"],["class","favorite-highlight-container",4,"ngIf"],[1,"artist-container","z-top"],[3,"innerHtml"],[1,"pt-2","z-top"],["class","link-container back-gradient d-flex z-top",4,"ngIf"],[1,"tune-img",3,"src"],[1,"favorite-highlight-container"],[1,"link-container","back-gradient","d-flex","z-top"],["target","_blank",1,"ml-auto",3,"href","click"],[1,"tune-icon","tune-icon-play"]],template:function(t,i){1&t&&n.YNc(0,P,16,13,"div",0),2&t&&n.Q6J("ngIf",i.tune)},directives:[s.O5,s.mk],pipes:[s.Ov],styles:['.tune-item[_ngcontent-%COMP%]{width:100%;border-bottom:1px solid rgba(128,128,128,.4);margin:10px 0 15px;padding:10px 10px 25px;position:relative;background-color:#fafafa}.tune-img-container[_ngcontent-%COMP%]{width:80px;min-width:80px}.tune-img[_ngcontent-%COMP%]{width:100%;max-height:100px}.category-conteiner[_ngcontent-%COMP%]{font-size:14px;text-align:right;font-weight:bold;font-family:"Oswald",sans-serif}.artist-container[_ngcontent-%COMP%]{font-size:14px;text-align:right}.link-container[_ngcontent-%COMP%]{font-size:15px;padding:20px 10px 8px 8px;position:absolute;bottom:0px;left:0px;right:0px}.back-gradient[_ngcontent-%COMP%]{background:linear-gradient(180deg,rgba(255,255,255,0) 0%,#ffffff 100%)}.tune-icon-bookmark[_ngcontent-%COMP%]{opacity:.5;cursor:pointer}.tune-icon-bookmark[_ngcontent-%COMP%]:hover{opacity:1}.favorite[_ngcontent-%COMP%]   .tune-icon-bookmark[_ngcontent-%COMP%]{opacity:1}.z-top[_ngcontent-%COMP%]{z-index:2}.favorite-highlight-container[_ngcontent-%COMP%]{position:absolute;top:0px;right:0px;height:40px;width:50px;border-bottom-left-radius:15px;z-index:1;background:linear-gradient(45deg,rgba(255,255,255,0) 50%,#ffe600 100%)}@media (min-width: 690px){.tune-item[_ngcontent-%COMP%]{width:300px;height:190px;overflow-y:hidden;margin:0 10px 20px;border:1px solid rgba(128,128,128,.4);border-radius:5px;padding:10px;transition:all .3s ease-out 0s}.tune-item[_ngcontent-%COMP%]:hover{background-color:#eeeaea}.back-gradient[_ngcontent-%COMP%]{background:linear-gradient(180deg,rgba(255,255,255,0) 0%,#f5f5f5 100%)}}']}),e})();function A(e,o){1&e&&n._UZ(0,"app-tune-card",5),2&e&&n.Q6J("tune",o.$implicit)}function J(e,o){if(1&e&&(n.TgZ(0,"div",3),n.YNc(1,A,1,1,"app-tune-card",4),n.ALo(2,"async"),n.qZA()),2&e){const t=n.oxw();n.xp6(1),n.Q6J("ngForOf",n.lcZ(2,1,t.tunes))}}const H=[{path:"",component:(()=>{class e{constructor(t,i){this.itunesClient=t,this.tuneSearchService=i,this.isLoading$=new g.X(!0),this.error$=new g.X(null),this.tunes=new g.X(null),this.unsubscriber=new v.w0}ngOnInit(){var t=this;return x(function*(){t.loadItunes(),t.unsubscriber.add(t.tuneSearchService.searchString$.subscribe(i=>{t.search(i)}))})()}ngOnDestroy(){this.unsubscriber&&this.unsubscriber.unsubscribe()}loadItunes(){var t=this;return x(function*(){t.isLoading$.next(!0),t.error$.next(null);try{const i=yield t.itunesClient.getTunes();i&&(t.allTunes=i.tunes,t.tunes.next(i.tunes))}catch(i){t.error$.next("An error occured while loading your tunes (")}finally{t.isLoading$.next(!1)}})()}search(t){if(!this.allTunes)return;if(!t)return void this.tunes.next(this.allTunes);const i=t.toLowerCase(),a=this.allTunes.filter(c=>c.title.toLowerCase().indexOf(i)>=0||c.artist.toLowerCase().indexOf(i)>=0);this.tunes.next(a)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h.a),n.Y36(_.H))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-home-page"]],decls:6,vars:9,consts:[[1,"container"],[3,"isLoading","error"],["class","d-flex flex-column flex-md-row flex-md-wrap pt-4",4,"ngIf"],[1,"d-flex","flex-column","flex-md-row","flex-md-wrap","pt-4"],[3,"tune",4,"ngFor","ngForOf"],[3,"tune"]],template:function(t,i){1&t&&(n.TgZ(0,"div",0),n._UZ(1,"app-loading-state",1),n.ALo(2,"async"),n.ALo(3,"async"),n.YNc(4,J,3,3,"div",2),n.ALo(5,"async"),n.qZA()),2&t&&(n.xp6(1),n.Q6J("isLoading",n.lcZ(2,3,i.isLoading$))("error",n.lcZ(3,5,i.error$)),n.xp6(3),n.Q6J("ngIf",n.lcZ(5,7,i.tunes)))},directives:[Z,s.O5,s.sg,O],pipes:[s.Ov],styles:[""]}),e})(),pathMatch:"full"}];let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[f.Bz.forChild(H)],f.Bz]}),e})(),F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[s.ez]]}),e})(),I=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[s.ez]]}),e})(),z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[s.ez,S,I,F]]}),e})()}}]);