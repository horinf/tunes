"use strict";(self.webpackChunktunes=self.webpackChunktunes||[]).push([[598],{1598:(Y,g,a)=>{a.r(g),a.d(g,{HomePageModule:()=>Q});var r=a(6019),f=a(3009);function m(n,o,e,i,s,c,u){try{var d=n[c](u),l=d.value}catch(z){return void e(z)}d.done?o(l):Promise.resolve(l).then(i,s)}function x(n){return function(){var o=this,e=arguments;return new Promise(function(i,s){var c=n.apply(o,e);function u(l){m(c,i,s,u,d,"next",l)}function d(l){m(c,i,s,u,d,"throw",l)}u(void 0)})}}var p=a(4499),v=a(7908),t=a(1514),h=a(2730),_=a(7803);function C(n,o){1&n&&(t.TgZ(0,"div",2),t.TgZ(1,"div",3),t.TgZ(2,"span",4),t._uU(3,"Loading...."),t.qZA(),t.qZA(),t.qZA())}function T(n,o){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"span",5),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("innerHTML",e.error,t.oJD)}}let y=(()=>{class n{constructor(){this.isLoading=!1,this.error=null}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-loading-state"]],inputs:{isLoading:"isLoading",error:"error"},decls:3,vars:2,consts:[["style","text-align: center; opacity: 0.15;",4,"ngIf"],[4,"ngIf"],[2,"text-align","center","opacity","0.15"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],[3,"innerHTML"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.YNc(1,C,4,0,"div",0),t.YNc(2,T,2,1,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",i.isLoading),t.xp6(1),t.Q6J("ngIf",!i.isLoading&&i.error))},directives:[r.O5],styles:[""]}),n})(),Z=(()=>{class n{constructor(){this.FAVORITES_KEY="my-favorite-tunes",this.load()}toggle(e){const i=this.favorites.indexOf(e);return i>=0?(this.favorites.splice(i,1),this.save(),!1):(this.favorites.push(e),this.save(),!0)}add(e){this.isFavorite||(this.favorites.push(e),this.save())}remove(e){const i=this.favorites.indexOf(e);i>=0&&(this.favorites.splice(i,1),this.save())}isFavorite(e){return this.favorites.indexOf(e)>=0}load(){try{const e=localStorage.getItem(this.FAVORITES_KEY);this.favorites=e?JSON.parse(e):new Array}catch(e){console.warn("Unable to load favorite tunes from storage, probably your brouser does not support localstorage"),this.favorites=new Array}}save(){try{const e=JSON.stringify(this.favorites);localStorage.setItem(this.FAVORITES_KEY,e)}catch(e){console.warn("Unable to store favorite tunes, probably your brouser does not support localstorage")}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function b(n,o){if(1&n&&t._UZ(0,"img",14),2&n){const e=t.oxw(2);t.Q6J("src",e.tune.imageUrl,t.LSH)}}function w(n,o){1&n&&t._UZ(0,"i",15)}function S(n,o){1&n&&t._UZ(0,"span",16)}function L(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",17),t.TgZ(1,"a",18),t.NdJ("click",function(s){return t.CHM(e),t.oxw(2).linkClick(s)}),t._UZ(2,"i",19),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("href",e.tune.link,t.LSH)}}const O=function(n){return{favorite:n}};function A(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",1),t.NdJ("click",function(){return t.CHM(e),t.oxw().cardClick()}),t.ALo(1,"async"),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.YNc(4,b,1,1,"img",4),t.qZA(),t.TgZ(5,"div",5),t.TgZ(6,"div",6),t._UZ(7,"span",7),t.YNc(8,w,1,0,"i",8),t.ALo(9,"async"),t.YNc(10,S,1,0,"span",9),t.ALo(11,"async"),t.qZA(),t.TgZ(12,"div",10),t._UZ(13,"span",11),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",12),t._UZ(15,"span",11),t.qZA(),t.YNc(16,L,3,1,"div",13),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("ngClass",t.VKq(14,O,t.lcZ(1,8,e.isFavorite$))),t.xp6(4),t.Q6J("ngIf",e.tune.imageUrl),t.xp6(3),t.Q6J("innerHtml",e.tune.category,t.oJD),t.xp6(1),t.Q6J("ngIf",t.lcZ(9,10,e.isFavorite$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(11,12,e.isFavorite$)),t.xp6(3),t.Q6J("innerHtml",e.tune.artist,t.oJD),t.xp6(2),t.Q6J("innerHtml",e.tune.title,t.oJD),t.xp6(1),t.Q6J("ngIf",e.tune.link)}}let k=(()=>{class n{constructor(e){this.favoritesService=e,this.isFavorite$=new p.X(!1)}set tune(e){if(this._tune=e,e){const i=this.favoritesService.isFavorite(null==e?void 0:e.id);this.isFavorite$.next(i)}}get tune(){return this._tune}ngOnInit(){}cardClick(){if(!this._tune)return;const e=this.favoritesService.toggle(this._tune.id);this.isFavorite$.next(e)}linkClick(e){e.stopPropagation()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-tune-card"]],inputs:{tune:"tune"},decls:1,vars:1,consts:[["class","tune-item d-flex flex-column",3,"ngClass","click",4,"ngIf"],[1,"tune-item","d-flex","flex-column",3,"ngClass","click"],[1,"d-flex"],[1,"tune-img-container"],["class","tune-img",3,"src",4,"ngIf"],[1,"pl-2","flex-grow-1"],[1,"category-conteiner","d-flex"],[1,"ml-auto","z-top",3,"innerHtml"],["class","tune-icon tune-icon-bookmark ml-2 z-top",4,"ngIf"],["class","favorite-highlight-container",4,"ngIf"],[1,"artist-container","z-top"],[3,"innerHtml"],[1,"pt-2","z-top"],["class","link-container back-gradient d-flex",4,"ngIf"],[1,"tune-img",3,"src"],[1,"tune-icon","tune-icon-bookmark","ml-2","z-top"],[1,"favorite-highlight-container"],[1,"link-container","back-gradient","d-flex"],["target","_blank",1,"ml-auto",3,"href","click"],[1,"tune-icon","tune-icon-play"]],template:function(e,i){1&e&&t.YNc(0,A,17,16,"div",0),2&e&&t.Q6J("ngIf",i.tune)},directives:[r.O5,r.mk],pipes:[r.Ov],styles:[".tune-item[_ngcontent-%COMP%]{width:100%;border-bottom:1px solid rgba(128,128,128,.4);margin:10px 0 15px;padding:10px 10px 25px;position:relative;background-color:#fafafa}.tune-img-container[_ngcontent-%COMP%]{width:80px;min-width:80px}.tune-img[_ngcontent-%COMP%]{width:100%;max-height:100px}.category-conteiner[_ngcontent-%COMP%]{font-size:14px;text-align:right;font-weight:bold}.artist-container[_ngcontent-%COMP%]{font-size:14px;text-align:right}.link-container[_ngcontent-%COMP%]{font-size:15px;padding:20px 10px 8px 8px;position:absolute;bottom:0px;left:0px;right:0px}.back-gradient[_ngcontent-%COMP%]{background:linear-gradient(180deg,rgba(255,255,255,0) 0%,#ffffff 100%)}.tune-icon-bookmark[_ngcontent-%COMP%]{margin-top:-8px;margin-right:-8px}.z-top[_ngcontent-%COMP%]{z-index:2}.favorite-highlight-container[_ngcontent-%COMP%]{position:absolute;top:0px;right:0px;height:40px;width:50px;border-bottom-left-radius:15px;z-index:1;background:linear-gradient(45deg,rgba(255,255,255,0) 50%,#ffe600 100%)}@media (min-width: 690px){.tune-item[_ngcontent-%COMP%]{width:300px;height:190px;overflow-y:hidden;margin:0 10px 20px;border:1px solid rgba(128,128,128,.4);border-radius:5px;padding:10px;transition:all .3s ease-out 0s}.tune-item[_ngcontent-%COMP%]:hover{background-color:#eeeaea;min-height:190px;height:auto;padding-bottom:40px}.back-gradient[_ngcontent-%COMP%]{background:linear-gradient(180deg,rgba(255,255,255,0) 0%,#f5f5f5 100%)}}"]}),n})();function M(n,o){1&n&&t._UZ(0,"app-tune-card",5),2&n&&t.Q6J("tune",o.$implicit)}function F(n,o){if(1&n&&(t.TgZ(0,"div",3),t.YNc(1,M,1,1,"app-tune-card",4),t.ALo(2,"async"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.tunes))}}const J=[{path:"",component:(()=>{class n{constructor(e,i){this.itunesClient=e,this.tuneSearchService=i,this.isLoading$=new p.X(!0),this.error$=new p.X(null),this.tunes=new p.X(null),this.unsubscriber=new v.w0}ngOnInit(){var e=this;return x(function*(){e.loadItunes(),e.unsubscriber.add(e.tuneSearchService.searchString$.subscribe(i=>{e.search(i)}))})()}ngOnDestroy(){this.unsubscriber&&this.unsubscriber.unsubscribe()}loadItunes(){var e=this;return x(function*(){e.isLoading$.next(!0),e.error$.next(null);try{const i=yield e.itunesClient.getTunes();i&&(e.allTunes=i.tunes,e.tunes.next(i.tunes))}catch(i){e.error$.next("An error occured while loading your tunes (")}finally{e.isLoading$.next(!1)}})()}search(e){if(!this.allTunes)return;if(!e)return void this.tunes.next(this.allTunes);const i=e.toLowerCase(),s=this.allTunes.filter(c=>c.title.toLowerCase().indexOf(i)>=0||c.artist.toLowerCase().indexOf(i)>=0);this.tunes.next(s)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.a),t.Y36(_.H))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home-page"]],decls:6,vars:9,consts:[[1,"container"],[3,"isLoading","error"],["class","d-flex flex-column flex-md-row flex-md-wrap pt-4",4,"ngIf"],[1,"d-flex","flex-column","flex-md-row","flex-md-wrap","pt-4"],[3,"tune",4,"ngFor","ngForOf"],[3,"tune"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-loading-state",1),t.ALo(2,"async"),t.ALo(3,"async"),t.YNc(4,F,3,3,"div",2),t.ALo(5,"async"),t.qZA()),2&e&&(t.xp6(1),t.Q6J("isLoading",t.lcZ(2,3,i.isLoading$))("error",t.lcZ(3,5,i.error$)),t.xp6(3),t.Q6J("ngIf",t.lcZ(5,7,i.tunes)))},directives:[y,r.O5,r.sg,k],pipes:[r.Ov],styles:[""]}),n})(),pathMatch:"full"}];let P=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[f.Bz.forChild(J)],f.Bz]}),n})(),H=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[r.ez]]}),n})(),I=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[r.ez]]}),n})(),Q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[r.ez,P,I,H]]}),n})()}}]);